version: 2.0
jobs:
  build:
    docker:
      - image: xarthisius/girder:test

    steps:
      - checkout
      - run: |
          ln -s /root/project /girder/plugins/wholetale
          ls -l /girder/plugins
          ls -l /girder/plugins/wholetale
          set -o pipefail; pip install -r requirements.txt | cat
          cd /girder ; girder-install web --all --dev | cat
      - run: |
          /bin/sh /girder/plugins/wholetale/cmake/run_circleci.sh
